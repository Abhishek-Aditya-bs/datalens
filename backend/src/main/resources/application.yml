# DataLens - AI-Powered Database Query Agent
# Base configuration - override with profiles

server:
  port: ${SERVER_PORT:8080}

spring:
  application:
    name: datalens
  profiles:
    # Default profiles for local development
    # Override with SPRING_PROFILES_ACTIVE environment variable
    active: ${SPRING_PROFILES_ACTIVE:dev,mock,openai}

# DataLens Configuration
datalens:
  # LLM Provider: 'azure' or 'openai'
  llm:
    provider: ${LLM_PROVIDER:openai}

  # Data Source Mode: 'oracle' or 'mock'
  datasource:
    mode: ${DATASOURCE_MODE:mock}

  # Schema Configuration
  schema:
    default: ${DEFAULT_SCHEMA:SCHEMA_A}
    secondary: ${SECONDARY_SCHEMA:SCHEMA_B}

  # System Prompt
  prompt:
    file: ${SYSTEM_PROMPT_FILE:classpath:prompts/system-prompt.txt}

  # Chat Memory Settings (JVM protection)
  memory:
    max-messages-per-session: ${MAX_MESSAGES_PER_SESSION:20}
    max-sessions: ${MAX_SESSIONS:1000}
    session-timeout-minutes: ${SESSION_TIMEOUT_MINUTES:30}

  # CORS Configuration
  cors:
    allowed-origins: ${CORS_ORIGINS:http://localhost:3000,http://localhost:5173}

# Spring Boot Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,dashboard
      base-path: /actuator
  endpoint:
    health:
      show-details: when_authorized
  metrics:
    tags:
      application: ${spring.application.name}

# Logging
logging:
  level:
    io.datalens: ${LOG_LEVEL:INFO}
    org.springframework.ai: INFO
